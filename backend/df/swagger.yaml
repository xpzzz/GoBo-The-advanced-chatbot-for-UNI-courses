swagger: "2.0"
info:
  description: "This is a test server to construct GoBo Knowledge base."
  version: "0.0.1-beta"
  title: "GoBo Service"
  # termsOfService: "http://swagger.io/terms/"
  contact:
    email: "shawn243343@gmail.com"
  license:
    name: "Apache 2.0"
    url: "http://www.apache.org/licenses/LICENSE-2.0.html"
    
host: "localhost"
basePath: "/v1"
tags:
- name: "Knowledge Base"
  description: "Access to the Knowledge Base management."
  # externalDocs:
  #   description: "Find out more"
  #   url: "http://swagger.io"
- name: "Document"
  description: "Access to Document management"
# - name: "user"
#   description: "Operations about user"
  # externalDocs:
  #   description: "Find out more about our store"
  #   url: "http://swagger.io"
schemes:
- "https"
- "http"
paths:
  /knowledge_base:
    post:
      tags:
      - "Knowledge Base"
      summary: "Add a new knowledge base to our agent GoBo"
      description: ""
      operationId: "addKnowledgeBase"
      produces:
      # - "application/xml"
      - "application/json"
      parameters:
      - in: "body"
        name: "display name"
        description: "a new Knowledge Base that needs to be added to GoBo"
        required: true
        schema:
          $ref: "#/definitions/NewKB"
      responses:
        200:
          description: "The display name has been used. Please try another name to create or use existing one."
          schema:
            $ref: "#/definitions/KBInfo"
          
        201:
          description: "New knowledge base has been created. Go to Document Management to add training samples."
          schema:
            $ref: "#/definitions/KBInfo"
        400:
          description: "Invalid input"


    get:
      tags:
      - "Knowledge Base"
      summary: "Get available knowledge bases"
      description: ""
      operationId: "getKnowledgeBase"
      produces:
      # - "application/xml"
      - "application/json"
      responses:
        200:
          description: "OK"
          schema:
            type: "array"
            items:
              $ref: "#/definitions/KBInfo"

      
  /knowledge_base/{ID}:
    get:
      tags:
      - "Knowledge Base"
      summary: "Find a knowledge base details by its ID"
      description: "return all details of a specific knowledge base."
      operationId: "findKnowledgeBaseById"
      produces:
      - "application/json"
      parameters:
      - name: "ID"
        in: "path"
        description: "ID to knowledge base by"
        required: true
        type: "string"
      responses:
        200:
          description: "OK"
          schema:
            $ref: "#/definitions/KBDetail"
        400:
          description: "Invalid ID value"
        
    delete: 
      tags:
      - "Knowledge Base"
      summary: " Delete a knowledge base details by its ID"
      description: " Warning! Be carefully, this action can not be recover."
      operationId: "DeleteKnowledgeBaseById"
      parameters:
      - name: "ID"
        in: "path"
        description: "ID to knowledge base by"
        required: true
        type: "string"
      responses:
        200:
          description: "OK, the knowledgebase has been deleted"
        400:
          description: "Invalid ID value"

  /documents:
    post:
      tags:
      - "Document"
      summary: "Add a new document to a specific knowledge base"
      description: ""
      operationId: "addDocument"
      produces:
      # - "application/xml"
      - "application/json"
      parameters:
      - in: "body"
        name: "document info"
        description: "please fill out all details in the sample"
        required: true
        schema:
          $ref: "#/definitions/DCDetail"
      responses:
        200:
          description: "The display name has been used. Please try another name."
          schema:
            $ref: "#/definitions/DCDetail"
        201:
          description: "New Document base has been created."
          
        400:
          description: "Invalid input"    







definitions:

  NewKB:
    type: "object"
    required:
    - "display-name"
    properties:
      display-name:
        description: "The display name of knowledge base"
        type: "string"
        example: "comp9021"
        
  KBInfo:
    type: "object"
    required: 
    - "id"
    - "display-name"
    - "document-amount"
    properties:
      id:
        description: "The ID of knowledge base generated by service"
        type: "string"
      display-name:
        description: "The display name of knowledge base"
        type: "string"
      document-amount:
        description: "The document amount of the knowledge base"
        type: "integer"
        format: "int32"
        
  KBDetail:
    type: "object"
    required: 
    - "id"
    - "knowledge-base-name"
    - "document-amount"
    properties:
      id:
        description: "The ID of knowledge base generated by service"
        type: "string"
      knowledge-base-name:
        description: "The display name of knowledge base"
        type: "string"
      document-amount:
        description: "The document amount of the knowledge base"
        type: "integer"
        format: "int32"
      documents:
        type: "array"
        items:
            $ref: "#/definitions/DCInfo"
        
      
      
  DCInfo:
    type: "object"
    properties:
      document-name:
        description: "The display name of the Document"
        type: "string"
      MIME-type:
        description: "The mime type of the Document. e.g. text/csv, text/htm ,text/plain, text/pdf etc."
        type: "string"
      Knowledge-type:
        description: "The Knowledge type of the Document. e.g. FAQ ,EXTRACTIVE_QA."
        type: "string"
      content_uri:
        description: "The source of the Document."
        type: "string"
        
        
  DCDetail:
    type: "object"
    required:
    - "knowledge-base-id"
    - "display-name"
    - "MIME-type"
    - "Knowledge-type"
    - "content-uri"
    properties:
      knowledge_base_id:
        description: "The id of knowledge base that you want to add document into"
        type: "string"
        example: "this could be searched from knowledge base management"
      display-name:
        description: "The display name of document"
        type: "string"
        example: "one world"
      MIME-type:
        description: "The mime type of the Document. e.g. text/csv, text/htm ,text/plain, text/pdf etc."
        type: "string"
        # allowableValues: 
        # - "text/plain"
      Knowledge-type:
        description: "The Knowledge type of the Document. e.g. FAQ ,EXTRACTIVE_QA."
        type: "string"
      content_uri:
        description: "The source of the Document."
        type: "string"
